cmake_minimum_required(VERSION 3.22)
project(ai_llm_integration VERSION 1.0.0 LANGUAGES CXX)

# è¨­ç½®C++æ¨™æº–
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Qt6è¨­ç½®
set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTOUIC ON)
set(CMAKE_AUTORCC ON)

# æŸ¥æ‰¾Qt6
find_package(Qt6 REQUIRED COMPONENTS Core Widgets Network)

# æ¢ä»¶æ€§æŸ¥æ‰¾WebSockets
find_package(Qt6WebSockets QUIET)
if(Qt6WebSockets_FOUND)
    message(STATUS "âœ… Qt6WebSockets found, WebSocket features enabled")
    set(HAVE_WEBSOCKETS ON)
else()
    message(WARNING "âš ï¸ Qt6WebSockets not found, WebSocket features will be disabled")
    set(HAVE_WEBSOCKETS OFF)
endif()

# ç·¨è­¯å™¨ç‰¹å®šè¨­ç½®
if(MSVC)
    add_compile_options(/utf-8 /Zc:__cplusplus /W3 /permissive-)
    add_compile_definitions(_CRT_SECURE_NO_WARNINGS)
endif()

# å®šç¾©ç‰¹æ€§å®
if(HAVE_WEBSOCKETS)
    add_compile_definitions(HAVE_WEBSOCKETS)
endif()

# æºæ–‡ä»¶
set(SOURCES
    main_new.cpp
    FramelessWindow.cpp
    CyberProgressBar.cpp
    LLMMainWindow.cpp
    OllamaLLMManager.cpp
)

# é ­æ–‡ä»¶
set(HEADERS
    AcademyTheme.h
    FramelessWindow.h
    CyberProgressBar.h
    LLMRequestItem.h
    LLMMainWindow.h
    OllamaLLMManager.h
    LLMGUI_New.h
)

# è³‡æºæ–‡ä»¶
set(RESOURCES
    Resources/resources.qrc
)

# å‰µå»ºå¯åŸ·è¡Œæ–‡ä»¶
add_executable(ai_llm_integration ${SOURCES} ${HEADERS} ${RESOURCES})

# éˆæ¥åº«
target_link_libraries(ai_llm_integration 
    Qt6::Core 
    Qt6::Widgets 
    Qt6::Network
)

# æ¢ä»¶æ€§éˆæ¥WebSockets
if(HAVE_WEBSOCKETS)
    target_link_libraries(ai_llm_integration Qt6::WebSockets)
endif()

# è¼¸å‡ºé…ç½®ä¿¡æ¯
message(STATUS "")
message(STATUS "ğŸ¤– AI LLM Integration Module Configuration")
message(STATUS "============================================")
message(STATUS "ğŸ“‹ Module Version: ${PROJECT_VERSION}")
message(STATUS "ğŸ¯ Qt6 Version: ${Qt6_VERSION}")
message(STATUS "ğŸ”§ Build Type: ${CMAKE_BUILD_TYPE}")
message(STATUS "ğŸ“ Source Directory: ${CMAKE_SOURCE_DIR}")
message(STATUS "ğŸ“¦ Binary Directory: ${CMAKE_BINARY_DIR}")
message(STATUS "ğŸ§ª Tests Enabled: ${BUILD_LLM_TESTS}")
message(STATUS "ğŸŒ Translation Support: Enabled")
if(HAVE_WEBSOCKETS)
    message(STATUS "ğŸ”Œ WebSocket Support: Enabled")
else()
    message(STATUS "ğŸ”Œ WebSocket Support: Disabled")
endif()
message(STATUS "============================================")
message(STATUS "")
